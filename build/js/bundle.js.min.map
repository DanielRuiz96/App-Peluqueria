{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","async","resultado","fetch","db","json","forEach","servicio","id","precio","nombreServicio","document","createElement","textContent","classList","add","console","log","precioServicio","servicioDiv","dataset","idServicio","appendChild","querySelector","onclick","seleccionarServicio","error","e","elemento","target","tagName","parentElement","contains","remove","eliminarServicio","parseInt","agregarServicio","firstElementChild","nextElementSibling","cambiarSeccion","querySelectorAll","enlace","addEventListener","preventDefault","paso","mostrarSeccion","botonesPaginador","seccionAnterior","tabAnterior","paginaSiguiente","paginaAnterior","mostrarResumen","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headdingCita","nombreCita","innerHTML","fechaCita","horaCita","serviciosCita","headdingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","filter","servicioObj","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","desabilitarFechaAnterior","inputFecha","fechaAhora","fechaDeshabilitar","getFullYear","getMonth","getDate","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["\r\nlet pagina=1;\r\nconst cita={\r\n    nombre: '',\r\n    fecha:'',\r\n    hora:'',\r\n    servicios:[]\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(){\r\n    iniciarApp();\r\n\r\n    // Resalta el div actual segun tab que se presiona.\r\n\r\n    mostrarSeccion();\r\n\r\n    //Oculta o muestra una seccion segun el tab.\r\n\r\n    cambiarSeccion();\r\n\r\n    // Paginacion siguiente y anterior.\r\n\r\n    paginaSiguiente();\r\n    paginaAnterior();\r\n\r\n    //Comprueba la pagina actual o mostrar la paginacion\r\n\r\n    botonesPaginador();\r\n\r\n    //Muestra el resumen de la cita \r\n\r\n    mostrarResumen();\r\n\r\n    // Almacena el nombre de la cita en el objeto.\r\n    nombreCita();\r\n\r\n    //Almacena la fecha de la cita en el objeto \r\n\r\n    fechaCita();\r\n\r\n    //Desahabilita dias pasados\r\n\r\n    desabilitarFechaAnterior();\r\n\r\n    // Almacena hora correcta\r\n\r\n    horaCita();\r\n\r\n})\r\n\r\nfunction iniciarApp(){\r\n    mostrarServicios();\r\n}\r\n\r\nasync function mostrarServicios(){\r\n    //console.log('consultando..')\r\n\r\n    try {\r\n        const resultado= await fetch('./servicios.json')\r\n        const db = await resultado.json();\r\n        const servicios=db.servicios;\r\n       \r\n\r\n        // Generar HTML\r\n\r\n        servicios.forEach(servicio => {\r\n            const {id,nombre,precio}=servicio;\r\n            \r\n\r\n            //DOM Scripting \r\n\r\n            const nombreServicio=document.createElement('P');\r\n            nombreServicio.textContent = nombre;\r\n            nombreServicio.classList.add('nombre-servicio');\r\n            console.log(nombreServicio);\r\n\r\n            //Generar Precio Servicio\r\n\r\n            const precioServicio=document.createElement('P');\r\n            precioServicio.textContent=`$ ${precio}`;\r\n            precioServicio.classList.add('precio-servicio');\r\n\r\n            //Generar Div contenedor\r\n\r\n            const servicioDiv=document.createElement('DIV');\r\n            servicioDiv.classList.add('servicio');\r\n            servicioDiv.dataset.idServicio=id;\r\n\r\n            // Inyectar precio y nombre al div de servicio\r\n\r\n            servicioDiv.appendChild(nombreServicio);\r\n            servicioDiv.appendChild(precioServicio);\r\n\r\n            // Inyectarlo en el HTML\r\n\r\n            document.querySelector('#servicios').appendChild(servicioDiv);\r\n\r\n            // Selecciona un servicio para la cita\r\n\r\n            servicioDiv.onclick=seleccionarServicio;\r\n\r\n        });\r\n    } catch (error) {\r\n        console.log('error');\r\n    }\r\n}\r\n\r\n\r\nfunction seleccionarServicio(e){\r\n    \r\n    let elemento;\r\n    // Forzar que el elemento al cal le damos click sea el DIV\r\n    if(e.target.tagName === 'P'){\r\n        elemento =e.target.parentElement;\r\n    }else{\r\n        elemento=e.target;\r\n    }\r\n  \r\n    if(elemento.classList.contains('seleccionado')){\r\n        elemento.classList.remove('seleccionado');\r\n\r\n        const id=parseInt(elemento.dataset.idServicio);\r\n        eliminarServicio(id);\r\n    }else{\r\n\r\n        elemento.classList.add('seleccionado');\r\n\r\n        const servicioObj ={\r\n            id:parseInt(elemento.dataset.idServicio),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.firstElementChild.nextElementSibling.textContent\r\n        }\r\n\r\n        //console.log(servicioObj);\r\n\r\n        agregarServicio(servicioObj);\r\n    }\r\n    \r\n}\r\n\r\nfunction cambiarSeccion(){\r\n    const enlaces=document.querySelectorAll('.tabs button')\r\n    enlaces.forEach(enlace => {\r\n        enlace.addEventListener('click',e =>{\r\n            e.preventDefault();\r\n            pagina=parseInt(e.target.dataset.paso);\r\n\r\n            mostrarSeccion();\r\n            botonesPaginador();\r\n        })\r\n    });\r\n}\r\n\r\nfunction mostrarSeccion(){\r\n\r\n    const seccionAnterior =  document.querySelector('.mostrar-seccion');\r\n\r\n    if(seccionAnterior){\r\n        seccionAnterior.classList.remove('mostrar-seccion');\r\n    }\r\n    \r\n    const seccionActual= document.querySelector(`#paso-${pagina}`);\r\n    seccionActual.classList.add('mostrar-seccion');\r\n\r\n\r\n    // Eliminar la clase de actual en el tab anterior\r\n    const tabAnterior=document.querySelector('.tabs .actual');\r\n\r\n    if(tabAnterior){\r\n        tabAnterior.classList.remove('actual');\r\n    }\r\n    //Resalta el Tab Actual\r\n\r\n    const tab=document.querySelector(`[data-paso=\"${pagina}\"]`)\r\n    tab.classList.add('actual');\r\n}\r\n\r\nfunction paginaSiguiente(){\r\n\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    paginaSiguiente.addEventListener('click',()=>{\r\n        pagina++;\r\n        botonesPaginador();\r\n    })\r\n\r\n}\r\n\r\nfunction paginaAnterior(){\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n    paginaAnterior.addEventListener('click',()=>{\r\n        pagina--;\r\n        botonesPaginador();\r\n    })\r\n}\r\n\r\nfunction botonesPaginador(){\r\n    const paginaSiguiente = document.querySelector('#siguiente');\r\n    const paginaAnterior = document.querySelector('#anterior');\r\n\r\n    if(pagina==1){\r\n        paginaAnterior.classList.add('ocultar');\r\n        \r\n     }else if (pagina==3){\r\n        paginaSiguiente.classList.add('ocultar');\r\n        paginaAnterior.classList.remove('ocultar');\r\n\r\n        mostrarResumen(); // Estamos en la pagina 3, carga el resumen de la cita\r\n       \r\n    }else{\r\n        paginaAnterior.classList.remove('ocultar');\r\n        paginaSiguiente.classList.remove('ocultar');\r\n    }\r\n    mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen(){\r\n    // Destructuring\r\n\r\n    const {nombre,fecha,hora,servicios}= cita;\r\n\r\n    // Seleccionar el el resumen\r\n    const resumenDiv=document.querySelector('.contenido-resumen');\r\n    \r\n    \r\n    // Limpiar HTML\r\n\r\n    while(resumenDiv.firstChild){\r\n        resumenDiv.removeChild(resumenDiv.firstChild);\r\n    }\r\n\r\n    //Validacion Objeto\r\n\r\n   \r\n\r\n    if(Object.values(cita).includes('')){\r\n        const noServicios=document.createElement('P');\r\n        noServicios.textContent='Faltan datos de Servicios,hora, fecha o nombre';\r\n\r\n        noServicios.classList.add('invalidar-cita');\r\n\r\n        //agregar a resumen Div\r\n        resumenDiv.appendChild(noServicios);\r\n    \r\n        console.log('El Objeto esta vacio')\r\n\r\n        return;\r\n    }\r\n\r\n        const headdingCita= document.createElement('H3');\r\n        headdingCita.textContent='Resumen de Cita';\r\n\r\n        const nombreCita= document.createElement('P');\r\n        nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`\r\n\r\n        const fechaCita= document.createElement('P');\r\n        fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`\r\n\r\n        const horaCita= document.createElement('P');\r\n        horaCita.innerHTML = `<span>Hora:</span> ${hora}`\r\n\r\n        const serviciosCita = document.createElement('DIV');\r\n        serviciosCita.classList.add('resumen-servicios');\r\n\r\n        const headdingServicios= document.createElement('H3');\r\n        headdingServicios.textContent='Resumen de Servicios';\r\n        serviciosCita.appendChild(headdingServicios);\r\n\r\n        let cantidad=0;\r\n        // Iterar sobre el arreglo de servicios\r\n\r\n        servicios.forEach(servicio => {\r\n\r\n            const {nombre,precio}=servicio;\r\n            const contenedorServicio=document.createElement('DIV');\r\n            contenedorServicio.classList.add('contenedor-servicio');\r\n\r\n            const textoServicio=document.createElement('P');\r\n            textoServicio.textContent=nombre;\r\n            \r\n            const precioServicio=document.createElement('P');\r\n            precioServicio.textContent=precio;\r\n            precioServicio.classList.add('precio');\r\n\r\n            const totalServicio= precio.split('$')\r\n            cantidad+= parseInt(totalServicio[1].trim())\r\n            // Colocar texto y precio en el Div\r\n\r\n            contenedorServicio.appendChild(textoServicio);\r\n            contenedorServicio.appendChild(precioServicio);\r\n            serviciosCita.appendChild(contenedorServicio);\r\n\r\n        });\r\n\r\n\r\n        resumenDiv.appendChild(headdingCita);\r\n        resumenDiv.appendChild(nombreCita);\r\n        resumenDiv.appendChild(fechaCita);\r\n        resumenDiv.appendChild(horaCita);\r\n        resumenDiv.appendChild(serviciosCita);\r\n        \r\n        const cantidadPagar=document.createElement('P');\r\n        cantidadPagar.classList.add('total');\r\n        cantidadPagar.innerHTML=`<span>Total a pagar: </span> $${cantidad}`\r\n        resumenDiv.appendChild(cantidadPagar);\r\n\r\n    \r\n}\r\n\r\nfunction eliminarServicio(id){\r\n    const {servicios}=cita;\r\n    cita.servicios=servicios.filter(servicio=>servicio.id !==id);\r\n    console.log(cita);\r\n}\r\n\r\nfunction agregarServicio(servicioObj){\r\n    const {servicios}=cita;\r\n    cita.servicios=[...servicios,servicioObj];\r\n\r\n\r\n}\r\n\r\nfunction nombreCita(){\r\n    const nombreInput=document.querySelector('#nombre');\r\n    nombreInput.addEventListener('input',(e)=>{\r\n\r\n        const nombreTexto =e.target.value.trim();\r\n\r\n        // Validacion de nombreTexto debe tener algo\r\n\r\n        if(nombreTexto==='' || nombreTexto.length <3){\r\n            mostrarAlerta('Nombre no Valido','error');\r\n        }else{\r\n            const alerta=document.querySelector('.alerta');\r\n            if(alerta){\r\n                alerta.remove();\r\n            }\r\n            cita.nombre=nombreTexto;\r\n        }\r\n\r\n\r\n     })\r\n    \r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo){\r\n    \r\n    // Si hay una alerta previa, entonces no crear otra\r\n\r\n    const alertaPrevia=document.querySelector('.alerta')\r\n    if(alertaPrevia){\r\n        return;\r\n    }\r\n    \r\n    const alerta=document.createElement('DIV')\r\n    alerta.textContent=mensaje;\r\n    alerta.classList.add('alerta');\r\n\r\n    if(tipo ==='error'){\r\n        alerta.classList.add('error');\r\n    }\r\n\r\n    const formulario =document.querySelector('.formulario');\r\n    formulario.appendChild(alerta);\r\n\r\n    //Eliminar la Alerta despues de 3 segundos\r\n\r\n    setTimeout(()=>{\r\n        alerta.remove();\r\n    },2000);\r\n}\r\n\r\nfunction fechaCita(){\r\n    const fechaInput = document.querySelector('#fecha');\r\n    fechaInput.addEventListener('input', e =>{\r\n        const dia = new Date(e.target.value).getUTCDay();\r\n\r\n        if([0,6].includes(dia)){\r\n            e.preventDefault();\r\n            fechaInput.value=' ';\r\n            mostrarAlerta('Fines de Semana No Permitidos', 'error');\r\n        }else{\r\n            cita.fecha =fechaInput.value;\r\n            console.log(cita);\r\n        }\r\n        \r\n    })\r\n}\r\n\r\nfunction desabilitarFechaAnterior(){\r\n    const inputFecha=document.querySelector(\"#fecha\");\r\n    const fechaAhora=new Date();\r\n    const year= fechaAhora.getFullYear();\r\n    const mes= fechaAhora.getMonth()+1;\r\n    const dia=fechaAhora.getDate()+1;\r\n\r\n    //Formato deseado: AAAA-MM-DD\r\n\r\n    const fechaDeshabilitar=`${year}-${mes}-${dia}`\r\n    inputFecha.min=fechaDeshabilitar;\r\n}\r\n\r\nfunction horaCita(){\r\n    const inputHora =document.querySelector('#hora');\r\n    inputHora.addEventListener('input',e =>{\r\n\r\n        const horaCita=e.target.value;\r\n        const hora=horaCita.split(':');\r\n        if(hora[0]<10 || hora[0]>18){\r\n            mostrarAlerta('Hora no valida','error');\r\n            setTimeout(()=>{\r\n                inputHora.value=' ';\r\n            },2000)\r\n        \r\n        }else{\r\n            cita.hora=horaCita;\r\n        }\r\n    })\r\n}"]}